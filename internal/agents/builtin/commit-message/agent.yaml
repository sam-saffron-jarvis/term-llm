name: commit-message
description: "Write git commit messages"

default_prompt: "Write a commit message for the staged changes (or unstaged if none staged)"

output_tool:
  name: set_commit_message
  param: message
  description: "Set the final commit message text"

on_complete: |
  tee .git/COMMIT_EDITMSG > .git/GITGUI_MSG
  echo ""
  echo "Commit message written to .git/COMMIT_EDITMSG"
  echo "Run 'git commit' to use it."

tools:
  enabled: [shell, read_file]

shell:
  allow: ["git diff**", "git log**", "git status", "git show**"]
  auto_run: true
  scripts:
    git-status: "git status --porcelain=v1"
    git-diff-staged: "git diff --cached --stat && echo '---' && git diff --cached"
    git-diff-unstaged: "git diff --stat && echo '---' && git diff"

max_turns: 200
